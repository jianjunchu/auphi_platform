<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aofei.query.mapper.UploadUnitDBInfoMapper">


    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
          a.unit_no AS unitNo
        , a.db_type AS dbType
        , a.sid AS sid
        , a.db_host AS dbHost
        , a.db_user AS dbUser
        , a.db_pwd AS dbPwd
        , a.db_port AS dbPort
        , a.is_backup AS isBackup
        , a.create_time AS createTime
        , a.update_time AS updateTime
    </sql>

    <select id="findList"  resultType="com.aofei.query.entity.UploadUnitDBInfo">
        select
        <include refid="Base_Column_List"/>
        from upload_unit_DB_info a
        <where>
            <if test="unitNo !=null and unitNo != ''">
                AND  a.unit_no   = #{unitNo}
            </if>
            <if test="search_time !=null and search_time != '' and search_time == 'create_time' ">
                AND  to_date(a.create_time,'yyyyMMddhhmmss')  between to_date(#{search_satrt},'yyyy-MM-dd hh:mm:ss') and to_date(#{search_end},' yyyy-MM-dd hh:mm:ss')
            </if>
            <if test="search_time !=null and search_time != '' and search_time == 'update_time' ">
                AND  to_date(a.update_time,'yyyyMMddhhmmss')  between to_date(#{search_satrt},'yyyy-MM-dd hh:mm:ss') and to_date(#{search_end},' yyyy-MM-dd hh:mm:ss')
            </if>
        </where>
    </select>



</mapper>
